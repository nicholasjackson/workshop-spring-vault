# Creating roles

A role configures the permissions for the database user. When you create a role, you can specify 
the SQL statements that are executed to create the user and grant permissions. 
You can also specify the TTL for the credentials.

The following role allows the user to insert records into the `payments` table, it does not 
provide permissions to create tables or drop tables or even to select records. Having correctly 
scoped permissions for a user is a fundamental security practice.

The creation statement is a SQL statement that is executed when the credentials are generated. 
The `\{{name}}` and `\{{password}}` are template variables these are automatically generated by Vault
and injected into the query when you request credentials.

The `\{{expiration}}` is another template 
variable that is replaced with the expiration time of the credentials. Expiration enables you to 
define a custom Time to Live (TTL) for every generated credential.

### Run the following command to create the `writer` role:

```shell
vault write database/roles/writer \
    db_name=payments \
    creation_statements="CREATE ROLE \"\{{name}}\" WITH LOGIN PASSWORD '\{{password}}' VALID UNTIL '\{{expiration}}'; 
    GRANT SELECT, INSERT, UPDATE ON payment_card TO \"\{{name}}\";" \
    default_ttl="1h" \
    max_ttl="24h"
```


Let's also create a create a `reader` role that allows the user to select records from the `payments` table:

Why not have a go at writing this role yourself, the permissions should grant select on the `payment_card` table
the other details will be the same as the `writer` role.

Did that work? If not you can find the soloution below.

<p>
<details>
  <summary style=\{{ fontSize: '18px', color: 'rgb(84, 128, 178)', fontWeight: 'medium' }} >Solution: reader role</summary>


```shell
vault secrets enable -version=2 -path=secret kv
```

</details>
</p>

Let's now create a secret for the application to use
